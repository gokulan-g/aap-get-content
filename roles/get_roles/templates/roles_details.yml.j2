###############################################################################
# auto-generated by aap-get-roles
# Ansible Automation Platform: https://{{ aap_hostname }}
# AAP Job ID: {{ tower_job_id }}
# Git User ID: {{ github_user_info.json.login }}
###############################################################################
---
controller_roles:
{% for key, value in final_content_roles.items() %}
{% for content_detail in value %}
{% for key1,value1 in content_detail.permissions.items() %}
{% if value1.teams | length > 0 %}
{% for team_name in value1.teams %}
{% if content_detail.content_type == 'job_template' %}
  - job_templates:
      - {{ content_detail.job_templates_name }}
{% endif %}
{% if content_detail.content_type == 'project' %}
  - projects:
      - {{ content_detail.projects_name }}
{% endif %}
{% if content_detail.content_type == 'workflow_job_template' %}
  - workflows:
      - {{ content_detail.workflow_job_templates_name }}
{% endif %}
    team: {{ team_name }}
    roles:
{% if key1 | lower == 'approve' %}
      - approval
{% else %}
      - {{ key1 | lower  }}
{% endif %}
    state: present

{% endfor %}
{% endif %}
{% endfor %}
{% for key1,value1 in content_detail.permissions.items() %}
{% if value1.users | length > 0 %}
{% for user_name in value1.users %}
{% if content_detail.content_type == 'job_template' %}
  - job_templates:
      - {{ content_detail.job_templates_name }}
{% endif %}
{% if content_detail.content_type == 'project' %}
  - projects:
      - {{ content_detail.projects_name }}
{% endif %}
{% if content_detail.content_type == 'workflow_job_template' %}
  - workflows:
      - {{ content_detail.workflow_job_templates_name }}
{% endif %}
    user: {{ user_name }}
    roles:
{% if key1 | lower == 'approve' %}
      - approval
{% else %}
      - {{ key1 | lower  }}
{% endif %}
    state: present

{% endfor %}
{% endif %}
{% endfor %}
{% endfor %}
{% endfor %}