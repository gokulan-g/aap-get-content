###############################################################################
# auto-generated by aap-get-content
# Total notification templates: {{ notification_template_list | length }}
# Ansible Automation Platform: https://{{ aap_hostname }}
# AAP Job ID: {{ tower_job_id }}
# Git User ID: {{ github_user_info.json.login }}
###############################################################################
---
controller_notifications:
{% for nt in notification_template_list %}
- name: {{ nt.name }}
  description: {{ nt.description | default('') | to_json(ensure_ascii=False) }}
  organization: {{ nt.summary_fields.organization.name | default('') }}
  state: present # change state to absent to delete the notification template
  notification_type: {{ nt.notification_type }}
  notification_configuration:
    username: '{{ nt.notification_configuration.username  | default('') }}' # this is required even if there's no username
    password: '{{ nt.notification_configuration.password | default('') }}' # this is required even if there's no password
{% if nt.notification_configuration.host is defined %}
    host: {{ nt.notification_configuration.host }}
{% endif %}
{% if nt.notification_configuration.recipients is defined %}
    recipients:
{% for recipient_string in nt.notification_configuration.recipients %}
{% set recipients = recipient_string.split(';') %}
{% for recipient in recipients %}
    - {{ recipient | trim }}
{% endfor %}
{% endfor %}
{% endif %}
{% if nt.notification_configuration.use_ssl is defined %}
    use_ssl: {{ nt.notification_configuration.use_ssl }}
{% endif %}
{% if nt.notification_configuration.use_tls is defined %}
    use_tls: {{ nt.notification_configuration.use_tls }}
{% endif %}
{% if nt.notification_configuration.sender is defined %}
    sender: {{ nt.notification_configuration.sender }}
{% endif %}
{% if nt.notification_configuration.port is defined %}
    port: {{ nt.notification_configuration.port }}
{% endif %}
{% if nt.notification_configuration.timeout is defined %}
    timeout: {{ nt.notification_configuration.timeout }}
{% endif %}
{% if nt.messages is defined and nt.messages %}
  messages:
{% if nt.messages.started is defined and nt.messages.started %}
    started:
      message: !unsafe "{{ nt.messages.started.message  }}"
      body: !unsafe "{{ nt.messages.started.body }}"
{% endif %}
{% if nt.messages.success is defined and nt.messages.success %}
    success:
      message: !unsafe "{{ nt.messages.success.message  }}"
      body: !unsafe "{{ nt.messages.success.body }}"
{% endif %}
{% if nt.messages.error is defined and nt.messages.error %}
    error:
      message: !unsafe "{{ nt.messages.error.message  }}"
      body: !unsafe "{{ nt.messages.error.body }}"
{% endif %}
{% endif %}

{% endfor %}